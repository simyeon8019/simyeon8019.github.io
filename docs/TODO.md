- [ ] Phase 1 (Week 1): 기본 구조 및 핵심 기능
  - [x] 프로젝트 설정 및 초기 구성
    - [x] Next.js 프로젝트 초기 설정 확인
    - [x] Clerk 인증 설정 및 연동
    - [x] Supabase 클라이언트 설정 (서버/클라이언트)
    - [x] 환경 변수 설정 (.env.local)
      - [x] NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
      - [x] CLERK_SECRET_KEY
      - [x] NEXT_PUBLIC_SUPABASE_URL
      - [x] NEXT_PUBLIC_SUPABASE_ANON_KEY
      - [x] SUPABASE_SERVICE_ROLE_KEY
    - [x] Next.js Middleware 설정 (Clerk 세션 확인)
    - [x] 기본 레이아웃 및 네비게이션 컴포넌트
  - [x] 사용자 인증 및 동기화
    - [x] API Route: POST /api/users/sync (실제 경로: /api/sync-user)
      - [x] Clerk 사용자 정보 조회
      - [x] Supabase users 테이블 조회/생성/업데이트
      - [x] 에러 처리 및 로깅
    - [x] 사용자 동기화 Provider/Context 설정
    - [x] 로그인/회원가입 페이지 (Clerk 컴포넌트)
  - [x] 상품 관련 기능 (우선순위: P0)
    - [x] API Route: GET /api/products
      - [x] 쿼리 파라미터 처리 (category, search, page)
      - [x] Supabase에서 상품 목록 조회
      - [x] 페이지네이션 구현
      - [x] 카테고리 필터링
      - [x] 검색 기능 (상품명 기준)
    - [x] API Route: GET /api/products/[id]
      - [x] 상품 ID로 단일 상품 조회
      - [x] 재고 확인 (선택사항)
      - [x] 에러 처리
    - [x] 상품 목록 페이지 (app/products/page.tsx)
      - [x] 그리드 레이아웃 구현
      - [x] 상품 카드 컴포넌트 (이미지, 이름, 가격)
      - [x] 무한 스크롤 또는 페이지네이션
      - [x] 카테고리 필터 UI
        - [x] 카테고리 필터 드롭다운 버튼 스타일 개선 (아이콘 포함)
        - [x] shoppingmall.sql의 카테고리와 일치 확인 (electronics, clothing, books, food, sports, beauty, home)
      - [x] 정렬 기능 구현
        - [x] API Route에 sort 파라미터 추가 (최신순, 이름순)
        - [x] 정렬 드롭다운 UI 추가
        - [x] 정렬 상태 URL 파라미터 관리
      - [x] 검색 입력 UI
      - [x] 로딩 상태 처리
      - [x] 에러 상태 처리
      - [x] 반응형 그리드 레이아웃 개선 (모바일 2열, 태블릿 3열, 데스크톱 4열)
      - [x] 상품 카드 컴포넌트 반응형 스타일 개선
      - [x] 필터 및 검색 UI 반응형 개선
      - [x] 로딩 및 빈 상태 UI 개선
    - [x] 상품 상세 페이지 (app/products/[id]/page.tsx)
      - [x] 상품 이미지 갤러리 (메인 이미지 + 썸네일)
      - [x] 상품 정보 표시 (이름, 가격, 설명)
      - [x] 상단 섹션 구현 완료
        - [x] 이름 표시
        - [x] 가격 표시
        - [x] 재고 상태 표시 (stock_quantity 또는 stock 지원)
      - [x] 중단 섹션 구현 완료
        - [x] 상품 설명 표시 (description 필드, 조건부 렌더링)
        - [x] 카테고리 정보 표시 (category 필드, 한국어 변환)
        - [x] 중단 섹션 레이아웃 (상단 섹션과 구분, 적절한 spacing)
      - [x] 하단 섹션 구현 완료
        - [x] 등록일 표시 (created_at)
        - [x] 수정일 표시 (updated_at, 등록일과 다를 때만)
      - [x] 사이즈 선택 UI (드롭다운 또는 버튼)
      - [x] 수량 선택 UI (증가/감소 버튼)
      - [x] 장바구니 추가 버튼
      - [x] 바로 구매 버튼
      - [x] 재고 표시 (선택사항)
      - [x] 로딩/에러 상태 처리
  - [x] 데이터베이스 스키마 생성
    - [x] products 테이블 생성
      - [x] 상품 정보 컬럼 정의 (name, price, category, sizes, stock 등)
      - [x] 카테고리 제약 조건 (CHECK constraint)
      - [x] 인덱스 생성 (category, is_active, created_at)
      - [x] updated_at 자동 업데이트 트리거
      - [x] RLS 비활성화
    - [x] cart_items 테이블 생성
      - [x] 장바구니 아이템 컬럼 정의 (clerk_id, product_id, size, quantity)
      - [x] UNIQUE 제약 조건 (clerk_id, product_id, size)
      - [x] 수량 제한 (CHECK constraint: 1-99)
      - [x] 외래 키 제약 조건 (product_id → products)
      - [x] 인덱스 생성 (clerk_id, product_id, created_at)
      - [x] updated_at 자동 업데이트 트리거
      - [x] RLS 비활성화
    - [x] 마이그레이션 파일 작성 (supabase/migrations.sql)
  - [x] 장바구니 기능 (우선순위: P0)
    - [x] API Route: GET /api/cart
      - [x] Clerk 사용자 ID로 장바구니 조회
      - [x] 상품 정보 JOIN
      - [x] 권한 확인
    - [x] API Route: POST /api/cart
      - [x] 장바구니에 상품 추가
      - [x] 중복 상품 처리 (같은 상품, 같은 사이즈는 수량 업데이트)
      - [x] 권한 확인
      - [x] 수량 검증 (1-99)
    - [x] API Route: PUT /api/cart/[id]
      - [x] 장바구니 아이템 수량 변경
      - [x] 권한 확인
      - [x] 수량 검증
    - [x] API Route: DELETE /api/cart/[id]
      - [x] 장바구니 아이템 삭제
      - [x] 권한 확인
    - [x] 장바구니 페이지 (app/cart/page.tsx)
      - [x] 장바구니 아이템 목록 표시
      - [x] 상품 정보 표시 (이미지, 이름, 사이즈, 가격)
      - [x] 수량 변경 UI
      - [x] 개별 상품 삭제 버튼
      - [x] 전체 선택/해제 체크박스
      - [x] 선택된 상품 총 금액 계산
      - [x] 주문하기 버튼
      - [x] 빈 장바구니 상태 UI
      - [x] 로딩/에러 상태 처리
    - [ ] 장바구니 상태 관리 (Context API 또는 Zustand) - 선택사항, 필요시 추가
- [x] Phase 2: 상품 기능 (1주)
  - [x] 홈페이지 상세 기능
    - [x] 홈페이지 레이아웃 (app/page.tsx)
      - [x] 카테고리 네비게이션 섹션
        - [x] 6개 주요 카테고리 표시 (상의, 하의, 아우터, 드레스, 신발, 액세서리)
        - [x] 카테고리 클릭 시 해당 카테고리 상품 목록 페이지로 이동
        - [x] 각 카테고리 아이콘 또는 대표 이미지 표시
        - [x] 반응형 그리드 레이아웃 (모바일: 2열, 태블릿: 3열, 데스크톱: 6열)
      - [x] 인기 상품 섹션
        - [x] API Route: GET /api/products/popular
          - [x] 주문량 기준 인기 상품 조회
          - [x] 상위 8-12개 상품 반환
        - [x] 인기 상품 그리드 표시
          - [x] 주문량 기준 인기 상품 8-12개 표시
          - [x] 상품 카드 컴포넌트 (이미지, 이름, 가격)
          - [x] 더보기 버튼 (전체 상품 목록 페이지로 이동)
        - [x] 로딩 상태 및 에러 처리
      - [x] 전체 상품 목록 섹션
        - [x] 최신 상품 그리드 표시
          - [x] API Route: GET /api/products 활용 (기존 API)
          - [x] 최신 상품 12-16개 미리보기 표시
          - [x] 기본 정렬: 최신순 (created_at DESC)
        - [x] 상품 카드 컴포넌트 (이미지, 이름, 가격)
        - [x] 더보기 버튼 (전체 상품 목록 페이지로 이동)
        - [x] 로딩 상태 및 에러 처리
      - [x] 반응형 디자인 구현 (모바일 우선)
      - [x] SEO 최적화 (메타데이터 설정)
  - [x] 제품 이미지 플레이스홀더 기능 (Unsplash API + Tavily API 활용)
    - [x] 이미지 검색 유틸리티 함수 생성 (lib/utils/image-placeholder.ts)
      - [x] searchProductImage 함수: Tavily API를 사용한 제품명 기반 이미지 검색
      - [x] searchUnsplashImage 함수: Unsplash API를 사용한 이미지 검색 (1순위)
      - [x] getProductImageUrl 함수: 기존 이미지 검증 후, 없으면 Unsplash → Tavily 순으로 검색
      - [x] validateImageUrl 함수: 이미지 URL 유효성 검증
      - [x] 불안정한 도메인 필터링 (티몬, Cafe24, 크로켓 등)
      - [x] 에러 처리 및 상세 로깅 추가
    - [x] API Route: GET /api/products에서 image_url이 null이거나 불안정한 경우 이미지 검색 및 DB 저장
    - [x] API Route: GET /api/products/[id]에서 image_url이 null이거나 불안정한 경우 이미지 검색 및 DB 저장
    - [x] 홈페이지 Server Component에서 이미지 보강 처리 및 DB 저장
    - [x] next.config.ts에 외부 이미지 도메인 remotePatterns 추가
      - [x] Unsplash 도메인 추가 (images.unsplash.com, plus.unsplash.com)
      - [x] 티몬, Cafe24, 크로켓 도메인 추가 (호환성)
      - [x] HTTP/HTTPS 모든 프로토콜 허용
    - [x] 환경 변수 설정
      - [x] TAVILY_API_KEY (2순위 폴백)
      - [x] UNSPLASH_ACCESS_KEY (1순위)
    - [x] 이미지 검색 에러 리포트 작성 (docs/error-report-product-images.md)
- [x] DB 스키마 마이그레이션: shoppingmall.sql 구조로 전환
  - [x] 데이터베이스 마이그레이션
    - [x] 마이그레이션 파일 생성 (supabase/migrations/20251103111020_migrate_to_shoppingmall_schema.sql)
      - [x] 기존 테이블 삭제 (DROP CASCADE)
      - [x] shoppingmall.sql 구조로 테이블 재생성
        - [x] products: price DECIMAL(10,2), category TEXT(제약조건 없음), sizes 제거, stock_quantity로 변경
        - [x] cart_items: size 필드 제거, UNIQUE 제약조건 변경 (clerk_id, product_id만)
        - [x] orders: clerk_id 기반 구조, shipping_address JSONB, order_note 추가
        - [x] order_items: 구조 확인 및 필요시 수정
      - [x] updated_at 트리거 재등록
      - [x] 인덱스 재생성
      - [x] RLS 비활성화
      - [x] 권한 부여
    - [x] 샘플 데이터 삽입 (20개 상품: electronics, clothing, books, food, sports, beauty, home)
    - [ ] 마이그레이션 테스트 및 검증 (Supabase에 적용 후 테스트 필요)
  - [x] 타입 정의 업데이트
    - [x] app/products/page.tsx: Product 인터페이스 수정 (sizes 제거, stock_quantity로 변경)
    - [x] app/products/[id]/page.tsx: Product 인터페이스 수정 (sizes 제거, stock_quantity로 변경)
    - [x] app/page.tsx: Product 인터페이스 수정
    - [x] components/ProductSection.tsx: Product 인터페이스 수정 (변경 불필요 확인됨)
    - [x] app/cart/page.tsx: Product, CartItem 인터페이스 수정 (size 제거)
  - [x] API Route 업데이트
    - [x] app/api/products/route.ts: price 타입 처리 (DECIMAL → number), stock_quantity 필드명 변경, sort 파라미터 추가 (최신순, 이름순)
    - [x] app/api/products/[id]/route.ts: sizes 제거, stock_quantity로 변경
    - [x] app/api/cart/route.ts: size 필드 제거, UNIQUE 제약조건 변경 (clerk_id, product_id만)
  - [x] UI 컴포넌트 업데이트
    - [x] app/products/page.tsx: 카테고리 필터 목록 변경 (electronics, clothing, books, food, sports, beauty, home)
    - [x] app/products/[id]/page.tsx: 사이즈 선택 UI 완전 제거
    - [x] app/cart/page.tsx: 사이즈 표시 제거
    - [x] components/ProductCard.tsx: getCategoryLabel 함수 업데이트 (새 카테고리 추가)
    - [x] app/page.tsx: 홈페이지 카테고리 네비게이션 업데이트 (7개 카테고리)
  - [x] 문서 업데이트
    - [x] docs/PRD.md: 스키마 섹션 업데이트 (4.1.2, 4.1.3, 4.1.4, 4.1.5)
    - [x] docs/CHANGELOG.md: 변경 이력 기록
  - [x] 다양한 카테고리 테스트 상품 추가
    - [x] 마이그레이션 파일 생성 (supabase/migrations/20251103111938_add_multi_category_products.sql)
      - [x] category CHECK 제약조건 제거 (다양한 카테고리 허용)
      - [x] 전자제품(electronics) 8개 상품 추가
      - [x] 도서(books) 8개 상품 추가
      - [x] 식품(food) 8개 상품 추가
      - [x] 스포츠(sports) 8개 상품 추가
      - [x] 뷰티(beauty) 8개 상품 추가
      - [x] 생활/가정(home) 8개 상품 추가
      - [x] 의류(clothing) 4개 상품 추가
      - [x] 총 52개 상품 추가 완료
    - [x] 코드 연동 확인
      - [x] app/products/page.tsx: 카테고리 필터 목록 확인 (7개 카테고리)
      - [x] components/ProductCard.tsx: getCategoryLabel 함수 확인 (7개 카테고리 매핑)
      - [x] components/CategoryNavigation.tsx: 홈페이지 카테고리 네비게이션 확인
      - [x] app/page.tsx: 홈페이지 상품 표시 확인
    - [x] 문서 업데이트
      - [x] docs/CHANGELOG.md: 다양한 카테고리 테스트 상품 추가 이력 기록
    - [x] Unsplash 이미지 추가
      - [x] Unsplash API 유틸리티 함수 생성
      - [x] 다중 소스 이미지 검색 전략 구현 (Unsplash → Tavily)
      - [x] 자동 이미지 검색 및 DB 저장 기능 구현
      - [ ] (선택사항) 기존 불안정한 이미지 일괄 정리 SQL 실행
- [ ] Phase 3 (Week 2): 주문 및 결제
  - [ ] 주문 프로세스 (우선순위: P0)
    - [ ] API Route: POST /api/orders
      - [ ] 주문 정보 생성
      - [ ] 주문번호 생성 (고유값)
      - [ ] order_items 생성 (주문 시점 스냅샷)
      - [ ] 장바구니에서 주문된 아이템 삭제
      - [ ] 배송지 정보 저장
      - [ ] 권한 확인
      - [ ] 에러 처리
    - [ ] API Route: GET /api/orders
      - [ ] 사용자별 주문 목록 조회
      - [ ] 최신순 정렬
      - [ ] 권한 확인
    - [ ] API Route: GET /api/orders/[id]
      - [ ] 주문 상세 정보 조회 (order + order_items)
      - [ ] 권한 확인
      - [ ] 에러 처리
    - [ ] 주문서 작성 페이지 (app/orders/create/page.tsx)
      - [ ] 주문 상품 확인 섹션
      - [ ] 배송지 정보 입력 폼
        - [ ] 수령인 이름
        - [ ] 수령인 전화번호
        - [ ] 배송지 주소
        - [ ] 배송지 상세주소
        - [ ] 우편번호
      - [ ] 최종 결제 금액 확인
      - [ ] 주문하기 버튼
      - [ ] 폼 유효성 검사
      - [ ] 로딩/에러 상태 처리
    - [ ] 주문 완료 페이지 (app/orders/[id]/success/page.tsx)
      - [ ] 주문번호 표시
      - [ ] 주문 완료 메시지
      - [ ] 주문 상품 요약
      - [ ] 배송지 정보 확인
      - [ ] 마이페이지 이동 버튼
      - [ ] 홈으로 이동 버튼
  - [ ] 결제 연동 (우선순위: P0)
    - [ ] Toss Payments SDK 설치 및 설정
    - [ ] Toss Payments 테스트 모드 환경 변수 설정
    - [ ] API Route: POST /api/payments/verify
      - [ ] 결제 검증 로직
      - [ ] 주문 상태 업데이트 (payment_status: 'paid')
      - [ ] 주문 상태 업데이트 (status: 'completed')
      - [ ] payment_id 저장
      - [ ] 보안 검증
    - [ ] API Route: POST /api/payments/callback
      - [ ] Toss Payments 웹훅 처리
      - [ ] 결제 상태 업데이트
      - [ ] 에러 처리
    - [ ] 결제 페이지 (app/payments/[orderId]/page.tsx)
      - [ ] Toss Payments 위젯 표시
      - [ ] 결제 금액 확인
      - [ ] 결제 성공 처리
      - [ ] 결제 실패 처리
      - [ ] 결제 진행 상태 표시
      - [ ] 리다이렉트 처리
  - [ ] 마이페이지 (우선순위: P0)
    - [ ] 마이페이지 레이아웃 (app/my/page.tsx)
      - [ ] 프로필 정보 표시 (Clerk 정보)
      - [ ] 주문 내역 섹션
      - [ ] 네비게이션 메뉴
    - [ ] 주문 내역 목록 컴포넌트
      - [ ] 주문 목록 표시 (주문번호, 날짜, 금액, 상태)
      - [ ] 주문 상태별 표시 (pending, completed, cancelled)
      - [ ] 결제 상태 표시 (pending, paid, failed)
      - [ ] 페이지네이션 또는 무한 스크롤
      - [ ] 로딩/에러 상태 처리
    - [ ] 주문 상세 정보 컴포넌트 (app/my/orders/[id]/page.tsx)
      - [ ] 주문 상품 목록 표시
      - [ ] 주문 정보 표시 (주문번호, 날짜, 상태)
      - [ ] 배송지 정보 표시
      - [ ] 결제 정보 표시
      - [ ] 주문 취소 기능 (선택사항)
      - [ ] 로딩/에러 상태 처리
    - [ ] 프로필 수정 기능 (선택사항)
      - [ ] 프로필 정보 수정 UI
      - [ ] API Route: PUT /api/users/profile
- [ ] 공통 기능 및 개선사항
  - [ ] UI/UX 개선
    - [ ] 반응형 디자인 구현 (모바일 우선)
    - [ ] 로딩 스피너/스켈레톤 UI
    - [ ] 에러 메시지 표시
    - [ ] 성공 알림 메시지
    - [ ] 이미지 최적화 (Next.js Image 컴포넌트)
  - [ ] 성능 최적화
    - [ ] API 응답 캐싱 (React Query 또는 SWR)
    - [ ] 이미지 최적화
    - [ ] 코드 스플리팅
    - [ ] 메타데이터 최적화 (SEO)
  - [ ] 에러 처리 및 로깅
    - [ ] 전역 에러 처리
    - [ ] API 에러 처리
    - [ ] 에러 로깅 (선택사항: Sentry)
  - [ ] 테스트
    - [ ] 주요 사용자 시나리오 테스트
      - [ ] 회원가입/로그인 → 상품 목록 조회
      - [ ] 상품 상세 → 장바구니 추가
      - [ ] 장바구니 → 주문하기
      - [ ] 주문서 작성 → 결제 진행
      - [ ] 결제 완료 → 주문 내역 확인
    - [ ] 테스트 데이터 준비 (10-20개 상품)
- [ ] 배포 준비
  - [ ] 환경 변수 확인 및 설정
    - [ ] Clerk 프로덕션 키 설정
    - [ ] Supabase 프로덕션 URL/키 설정
    - [ ] Toss Payments 테스트/프로덕션 키 설정
  - [ ] Vercel 배포 설정
    - [ ] 프로젝트 연결
    - [ ] 환경 변수 설정
    - [ ] 빌드 설정 확인
  - [ ] 배포 후 검증
    - [ ] 기본 기능 동작 확인
    - [ ] 결제 테스트 모드 확인
    - [ ] 에러 모니터링 설정 (선택사항)
  - [ ] 도메인 연결 (선택사항)
